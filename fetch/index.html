<!DOCTYPE html>
<html>
 <head>
    <title>unsafe fetch</title><meta charset="utf-8">
    <style>h1 {cursor: pointer}</style>
 </head>
 <body>
    <h1>click me</h1>
    <div id="list"></div>
    <script>{
        // async - можем использовать await
        document.querySelector('h1').addEventListener('click', async e => {
            e.target.textContent = 'Отправлено!';

            const URI = 'http://media.dist-learn.spb.ru/j/users/';
            // Испольщуем метод fetch для обращения к реусосу. Делаем преоброзование с помощью метода then и приводим к формату json.
            const x = await fetch(URI).then(x => x.json());
            console.log(x);
            // alert(JSON.stringify(x) вывод
            const result = e.target.textContent = 'Результат (Login): ';

            let div = document.getElementById('list');
            let ul = document.createElement('ul');
            div.appendChild(ul);


            var data = [x.users[0].login, x.users[1].login, x.users[2].login, x.users[3].login];
            for (var i = 0, ln = data.length; i < ln; i++) {
                var li = document.createElement('li');
                li.innerHTML = 'Login - ' + data[i];
                ul.appendChild(li);
            };
        });
    }</script>
 </body>
</html>
